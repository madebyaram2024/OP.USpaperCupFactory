<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Pacific Paper Cups and More - Dashboard</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#1f3a60",
                        "pacific-blue": "#4FA9C6",
                        "background-light": "#f4f7f9",
                        "background-dark": "#14181e",
                        "neutral-white": "#FFFFFF",
                        "text-primary": "#121416",
                        "text-secondary": "#6a7381",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "0.75rem",
                        "xl": "1rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        .wave-bg {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3e%3cpath fill='%234FA9C6' fill-opacity='0.05' d='M0,192L48,176C96,160,192,128,288,133.3C384,139,480,181,576,186.7C672,192,768,160,864,138.7C960,117,1056,107,1152,112C1248,117,1344,139,1392,149.3L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3e%3c/path%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: bottom;
            background-size: cover;
        }
        .dark .wave-bg {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3e%3cpath fill='%234FA9C6' fill-opacity='0.08' d='M0,192L48,176C96,160,192,128,288,133.3C384,139,480,181,576,186.7C672,192,768,160,864,138.7C960,117,1056,107,1152,112C1248,117,1344,139,1392,149.3L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3e%3c/path%3e%3c/svg%3e");
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-text-primary">
    <div class="relative flex h-screen w-full group/design-root overflow-hidden">
        <aside class="w-64 bg-primary text-white flex flex-col flex-shrink-0 z-20">
            <div class="flex h-16 items-center gap-3 px-6 border-b border-white/10">
                <div class="size-8 cursor-pointer" onclick="loadScreen('dashboard')">
                    <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                        <path clip-rule="evenodd" d="M39.475 21.6262C40.358 21.4363 40.6863 21.5589 40.7581 21.5934C40.7876 21.655 40.8547 21.857 40.8082 22.3336C40.7408 23.0255 40.4502 24.0046 39.8572 25.2301C38.6799 27.6631 36.5085 30.6631 33.5858 33.5858C30.6631 36.5085 27.6632 38.6799 25.2301 39.8572C24.0046 40.4502 23.0255 40.7407 22.3336 40.8082C21.8571 40.8547 21.6551 40.7875 21.5934 40.7581C21.5589 40.6863 21.4363 40.358 21.6262 39.475C21.8562 38.4054 22.4689 36.9657 23.5038 35.2817C24.7575 33.2417 26.5497 30.9744 28.7621 28.762C30.9744 26.5497 33.2417 24.7574 35.2817 23.5037C36.9657 22.4689 38.4054 21.8562 39.475 21.6262ZM4.41189 29.2403L18.7597 43.5881C19.8813 44.7097 21.4027 44.9179 22.7217 44.7893C24.0585 44.659 25.5148 44.1631 26.9723 43.4579C29.9052 42.0387 33.2618 39.5667 36.4142 36.4142C39.5667 33.2618 42.0387 29.9052 43.4579 26.9723C44.1631 25.5148 44.659 24.0585 44.7893 22.7217C44.9179 21.4027 44.7097 19.8813 43.5881 18.7597L29.2403 4.41187C27.8527 3.02428 25.8765 3.02573 24.2861 3.36776C22.6081 3.72863 20.7334 4.58419 18.8396 5.74801C16.4978 7.18716 13.9881 9.18353 11.5858 11.5858C9.18354 13.988 7.18717 16.4978 5.74802 18.8396C4.58421 20.7334 3.72865 22.6081 3.36778 24.2861C3.02574 25.8765 3.02429 27.8527 4.41189 29.2403Z" fill="currentColor" fill-rule="evenodd"></path>
                    </svg>
                </div>
                <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em] cursor-pointer" onclick="loadScreen('dashboard')">Pacific Paper</h2>
            </div>
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('dashboard')">
                    <span class="material-symbols-outlined text-xl">dashboard</span>
                    <span class="text-sm font-medium">Dashboard</span>
                </a>
                <a class="relative flex items-center gap-3 px-4 py-2.5 rounded-lg bg-white/10 text-white transition-colors" href="#" onclick="loadScreen('customers')">
                    <div class="absolute left-0 top-0 h-full w-1 rounded-r-full bg-pacific-blue"></div>
                    <span class="material-symbols-outlined text-xl">group</span>
                    <span class="text-sm font-bold">Customers</span>
                </a>
                <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('work-orders')">
                    <span class="material-symbols-outlined text-xl">folder_managed</span>
                    <span class="text-sm font-medium">Work Orders</span>
                </a>
                <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('production')">
                    <span class="material-symbols-outlined text-xl">inventory_2</span>
                    <span class="text-sm font-medium">Production</span>
                </a>
                <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('communication')">
                    <span class="material-symbols-outlined text-xl">forum</span>
                    <span class="text-sm font-medium">Communication Hub</span>
                </a>
                <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('shipping')">
                    <span class="material-symbols-outlined text-xl">local_shipping</span>
                    <span class="text-sm font-medium">Shipping</span>
                </a>
                <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('reports')">
                    <span class="material-symbols-outlined text-xl">bar_chart</span>
                    <span class="text-sm font-medium">Reports</span>
                </a>
                <div class="pt-4 mt-4 border-t border-white/10">
                    <div class="flex items-center gap-3 px-4 py-2.5">
                        <span class="material-symbols-outlined text-xl text-pacific-blue">admin_panel_settings</span>
                        <span class="text-sm font-bold text-pacific-blue">Admin</span>
                    </div>
                    <div class="pl-5 space-y-1">
                        <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('admin')">
                            <span class="text-sm font-medium">Admin Dashboard</span>
                        </a>
                        <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('user-management')">
                            <span class="text-sm font-medium">User Management</span>
                        </a>
                        <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('role-permissions')">
                            <span class="text-sm font-medium">Role & Permissions</span>
                        </a>
                    </div>
                </div>
            </nav>
            <div class="mt-auto p-4 border-t border-white/10">
                <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('settings')">
                    <span class="material-symbols-outlined text-xl">settings</span>
                    <span class="text-sm font-medium">Settings</span>
                </a>
                <a class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-colors" href="#" onclick="loadScreen('help')">
                    <span class="material-symbols-outlined text-xl">help</span>
                    <span class="text-sm font-medium">Help & Support</span>
                </a>
            </div>
        </aside>
        <div class="flex flex-1 flex-col relative wave-bg">
            <header class="flex h-16 items-center justify-end whitespace-nowrap bg-neutral-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 px-6 shadow-sm z-10">
                <div class="flex flex-1 items-center gap-6">
                    <div class="relative w-full max-w-md">
                        <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary/80 dark:text-gray-400 text-xl">search</span>
                        <input id="globalSearch" class="form-input h-10 w-full rounded-lg bg-background-light dark:bg-background-dark text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-700 pl-10 pr-4 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue" placeholder="Search customer, order, file..." type="search"/>
                    </div>
                    <div class="flex ml-auto items-center gap-2">
                        <button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 w-10 text-text-secondary hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 transition-colors">
                            <span class="material-symbols-outlined text-xl">notifications</span>
                        </button>
                        <button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 w-10 text-text-secondary hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 transition-colors">
                            <span class="material-symbols-outlined text-xl">settings</span>
                        </button>
                        <div class="relative group">
                            <button class="ml-2 bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 cursor-pointer" data-alt="User profile picture" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDNfq5dU805V8IoeKHSLx3Pl4T3L2KN3cM-RfP8WvBNgkTscSGVrFLjWtsVac9eo0s59b9cn-wD2Plu8fXQUsubKcJmN01oWvs2remK0F85x6I_LzETyXhkHtaxkHNJC-9XPvvJyJPmAQKplpsZ3g2nlxmvSWm31n5uZI3JMRFlkZnt1NyLAxQOXIJWiapk7olmyGO8uAYa4PmiKnGUoMth_bDMFMk55xtd1AYE0rWeiSy75jrczebyHk-eFxGUYDcXcVo7KJHpg2c");' onclick="toggleProfileMenu()">
                            </button>
                            <div id="profileMenu" class="absolute right-0 mt-2 w-56 bg-neutral-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1.5 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                                <div class="px-3 py-2 border-b border-gray-200 dark:border-gray-700">
                                    <p class="text-sm font-semibold text-text-primary dark:text-white">Alex Chen</p>
                                    <p class="text-xs text-text-secondary dark:text-gray-400">alex.chen@pacific.com</p>
                                </div>
                                <a class="flex items-center gap-3 px-3 py-2.5 text-sm text-text-secondary dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" href="#" onclick="event.stopPropagation(); loadScreen('account-settings');">
                                    <span class="material-symbols-outlined text-xl">account_circle</span>
                                    <span>My Profile</span>
                                </a>
                                <a class="flex items-center gap-3 px-3 py-2.5 text-sm text-text-secondary dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" href="#" onclick="event.stopPropagation(); loadScreen('account-settings');">
                                    <span class="material-symbols-outlined text-xl">settings</span>
                                    <span>Account Settings</span>
                                </a>
                                <a class="flex items-center gap-3 px-3 py-2.5 text-sm text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 border-t border-gray-200 dark:border-gray-700 mt-1" href="#" onclick="event.stopPropagation(); handleLogout(event);">
                                    <span class="material-symbols-outlined text-xl">logout</span>
                                    <span>Logout</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <main id="mainContent" class="flex flex-1 overflow-hidden">
                <!-- Dashboard will be loaded here -->
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Dashboard Overview</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <p class="text-text-secondary dark:text-gray-300 text-sm mb-1">Total Customers</p>
                            <p class="text-3xl font-bold text-primary dark:text-white" id="totalCustomers">0</p>
                        </div>
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <p class="text-text-secondary dark:text-gray-300 text-sm mb-1">Active Orders</p>
                            <p class="text-3xl font-bold text-primary dark:text-white" id="activeOrders">0</p>
                        </div>
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <p class="text-text-secondary dark:text-gray-300 text-sm mb-1">Completed Today</p>
                            <p class="text-3xl font-bold text-primary dark:text-white" id="completedToday">0</p>
                        </div>
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <p class="text-text-secondary dark:text-gray-300 text-sm mb-1">Revenue (30d)</p>
                            <p class="text-3xl font-bold text-primary dark:text-white" id="revenue30d">$0</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white">Recent Activity</h3>
                                <button class="text-pacific-blue text-sm font-medium hover:underline">View All</button>
                            </div>
                            <div class="space-y-4">
                                <div class="flex items-start gap-3">
                                    <div class="size-10 rounded-full bg-pacific-blue/10 flex items-center justify-center flex-shrink-0">
                                        <span class="material-symbols-outlined text-pacific-blue text-sm">receipt_long</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">New order #WO-00789 received from The Cup Company</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">2 minutes ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div class="size-10 rounded-full bg-green-500/10 flex items-center justify-center flex-shrink-0">
                                        <span class="material-symbols-outlined text-green-500 text-sm">check_circle</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">Order #WO-00788 has been completed</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">1 hour ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div class="size-10 rounded-full bg-blue-500/10 flex items-center justify-center flex-shrink-0">
                                        <span class="material-symbols-outlined text-blue-500 text-sm">person_add</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">New customer "Java House" has been registered</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">3 hours ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white">Production Queue</h3>
                                <button class="text-pacific-blue text-sm font-medium hover:underline">View All</button>
                            </div>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="size-10 rounded bg-pacific-blue/10 flex items-center justify-center">
                                            <span class="material-symbols-outlined text-pacific-blue text-sm">local_cafe</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">Custom Coffee Cups</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">WO-00789 • The Cup Company</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium text-text-primary dark:text-white">In Progress</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">60% complete</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="size-10 rounded bg-green-500/10 flex items-center justify-center">
                                            <span class="material-symbols-outlined text-green-500 text-sm">local_dining</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">Premium Dinner Ware</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">WO-00787 • Morning Brew Cafe</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium text-text-primary dark:text-white">Ready</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">100% complete</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="size-10 rounded bg-yellow-500/10 flex items-center justify-center">
                                            <span class="material-symbols-outlined text-yellow-500 text-sm">local_cafe</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">Corporate Event Mugs</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">WO-00790 • Java House</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium text-text-primary dark:text-white">Pending</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">5% complete</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        
        <!-- Customer Management Modal -->
        <div id="customerModal" class="absolute inset-0 z-50 flex items-center justify-center bg-gray-900/60 backdrop-blur-sm hidden" role="dialog">
            <div class="bg-neutral-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg m-4 p-8 text-center">
                <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-pacific-blue/10">
                    <span class="material-symbols-outlined text-3xl text-pacific-blue">person_add</span>
                </div>
                <h2 class="mt-4 text-2xl font-bold text-text-primary dark:text-white">Add New Customer</h2>
                <form id="customerForm" class="mt-6 text-left">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Company Name *</label>
                            <input type="text" id="companyName" required class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Contact Person *</label>
                            <input type="text" id="contactPersonInput" required class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Email *</label>
                            <input type="email" id="email" required class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Phone</label>
                            <input type="tel" id="phone" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">City</label>
                            <input type="text" id="city" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Notes</label>
                            <textarea id="notes" rows="3" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue"></textarea>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-end gap-3">
                        <button type="button" id="cancelBtn" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-gray-200 dark:bg-gray-700 text-text-primary dark:text-white text-sm font-medium leading-normal hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                            Cancel
                        </button>
                        <button type="submit" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-pacific-blue text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-pacific-blue/90 transition-colors">
                            Save Customer
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Success Modal -->
        <div id="successModal" class="absolute inset-0 z-50 flex items-center justify-center bg-gray-900/60 backdrop-blur-sm hidden" role="dialog">
            <div class="bg-neutral-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg m-4 p-8 text-center">
                <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/50">
                    <span class="material-symbols-outlined text-3xl text-green-600 dark:text-green-400">check_circle</span>
                </div>
                <h2 id="successTitle" class="mt-4 text-2xl font-bold text-text-primary dark:text-white">Customer Created Successfully</h2>
                <p id="successMessage" class="mt-2 text-text-secondary dark:text-gray-300">The customer has been created and the following file structure has been automatically generated.</p>
                <div id="successFilesList" class="mt-6 space-y-3 text-left bg-background-light dark:bg-background-dark p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                    <div class="flex items-center gap-3 text-text-primary dark:text-gray-200">
                        <span class="material-symbols-outlined text-pacific-blue text-xl">folder</span>
                        <span class="font-medium">Assets</span>
                    </div>
                    <div class="flex items-center gap-3 text-text-primary dark:text-gray-200">
                        <span class="material-symbols-outlined text-pacific-blue text-xl">folder</span>
                        <span class="font-medium">Production Logo</span>
                    </div>
                    <div class="flex items-center gap-3 text-text-primary dark:text-gray-200">
                        <span class="material-symbols-outlined text-pacific-blue text-xl">folder</span>
                        <span class="font-medium">Pre Production</span>
                    </div>
                    <div class="flex items-center gap-3 text-text-primary dark:text-gray-200">
                        <span class="material-symbols-outlined text-pacific-blue text-xl">folder</span>
                        <span class="font-medium">PrintReady</span>
                    </div>
                    <div class="flex items-center gap-3 text-text-primary dark:text-gray-200">
                        <span class="material-symbols-outlined text-pacific-blue text-xl">folder</span>
                        <span class="font-medium">Junk Drawer</span>
                    </div>
                </div>
                <div class="mt-8 flex justify-center">
                    <button id="doneBtn" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-pacific-blue text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-pacific-blue/90 transition-colors">
                        <span class="truncate">Done</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Login Modal (for logout functionality) -->
        <div id="logoutModal" class="absolute inset-0 z-50 flex items-center justify-center bg-gray-900/60 backdrop-blur-sm hidden" role="dialog">
            <div class="bg-neutral-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md m-4 p-8 text-center">
                <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/50">
                    <span class="material-symbols-outlined text-3xl text-red-600 dark:text-red-400">logout</span>
                </div>
                <h2 class="mt-4 text-2xl font-bold text-text-primary dark:text-white">Logout</h2>
                <p class="mt-2 text-text-secondary dark:text-gray-300">Are you sure you want to logout? You will need to authenticate again to access the system.</p>
                <div class="mt-8 flex justify-center gap-3">
                    <button id="cancelLogoutBtn" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-gray-200 dark:bg-gray-700 text-text-primary dark:text-white text-sm font-medium leading-normal hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                        Cancel
                    </button>
                    <button id="confirmLogoutBtn" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-red-500 text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-red-600 transition-colors">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // API base URL - update this to match your backend server
        const API_BASE_URL = 'http://localhost:8080/api/v1/customers';
        
        // Cache DOM elements
        const mainContent = document.getElementById('mainContent');
        const customerModal = document.getElementById('customerModal');
        const successModal = document.getElementById('successModal');
        const logoutModal = document.getElementById('logoutModal');
        const customerForm = document.getElementById('customerForm');
        const cancelBtn = document.getElementById('cancelBtn');
        const doneBtn = document.getElementById('doneBtn');
        const globalSearch = document.getElementById('globalSearch');
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Event listeners
            cancelBtn.addEventListener('click', () => {
                customerModal.classList.add('hidden');
            });
            
            doneBtn.addEventListener('click', () => {
                successModal.classList.add('hidden');
            });
            
            document.getElementById('confirmLogoutBtn').addEventListener('click', () => {
                alert('Logged out successfully');
                logoutModal.classList.add('hidden');
            });
            
            document.getElementById('cancelLogoutBtn').addEventListener('click', () => {
                logoutModal.classList.add('hidden');
            });
            
            customerForm.addEventListener('submit', handleAddCustomer);
            
            globalSearch.addEventListener('input', handleGlobalSearch);
            
            // Load initial dashboard data
            loadDashboardStats();
        });
        
        // Load dashboard statistics
        async function loadDashboardStats() {
            try {
                // Load customer stats
                const response = await fetch(`${API_BASE_URL}?limit=1000`); // Get all customers
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('totalCustomers').textContent = data.total || 0;
                }
                
                // For demonstration, setting mock values for other stats
                document.getElementById('activeOrders').textContent = '12';
                document.getElementById('completedToday').textContent = '8';
                document.getElementById('revenue30d').textContent = '$12,450';
            } catch (error) {
                console.error('Error loading dashboard stats:', error);
                // Set default values if API fails
                document.getElementById('totalCustomers').textContent = '0';
                document.getElementById('activeOrders').textContent = '0';
                document.getElementById('completedToday').textContent = '0';
                document.getElementById('revenue30d').textContent = '$0';
            }
        }
        
        // Load different screens based on navigation
        function loadScreen(screen) {
            switch(screen) {
                case 'customers':
                    loadCustomerManagement();
                    break;
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'work-orders':
                    loadWorkOrders();
                    break;
                case 'production':
                    loadProduction();
                    break;
                case 'reports':
                    loadReports();
                    break;
                case 'settings':
                    loadSettings();
                    break;
                case 'account-settings':
                    loadAccountSettings();
                    break;
                case 'admin':
                    loadAdminDashboard();
                    break;
                case 'user-management':
                    loadUserManagement();
                    break;
                case 'role-permissions':
                    loadRolePermissions();
                    break;
                case 'communication':
                    loadCommunication();
                    break;
                case 'shipping':
                    loadShipping();
                    break;
                case 'help':
                    loadHelp();
                    break;
                default:
                    loadDashboard();
            }
        }
        
        // Load customer management screen
        function loadCustomerManagement() {
            mainContent.innerHTML = `
                <div class="w-full max-w-md flex-shrink-0 border-r border-gray-200 dark:border-gray-700 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm flex flex-col">
                    <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                        <div class="flex flex-wrap justify-between gap-4 items-center">
                            <p class="text-text-primary dark:text-white text-3xl font-bold leading-tight tracking-[-0.033em]">Customers</p>
                            <button id="addCustomerBtn" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-pacific-blue text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-pacific-blue/90 transition-colors">
                                <span class="truncate">Add New Customer</span>
                            </button>
                        </div>
                        <div class="mt-4">
                            <label class="flex flex-col min-w-40 h-12 w-full">
                                <div class="flex w-full flex-1 items-stretch rounded-lg h-full bg-neutral-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
                                    <div class="text-text-secondary dark:text-gray-400 flex items-center justify-center pl-4">
                                        <span class="material-symbols-outlined text-xl">search</span>
                                    </div>
                                    <input id="customerSearch" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-text-primary dark:text-white focus:outline-0 focus:ring-0 border-none bg-transparent h-full placeholder:text-text-secondary dark:placeholder:text-gray-400 pl-2 text-base font-normal leading-normal" placeholder="Search by name or ID..." value=""/>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div id="customerList" class="flex-1 overflow-y-auto p-4 space-y-3">
                        <!-- Customer list will be populated dynamically -->
                        <div class="flex items-stretch justify-between gap-4 rounded-lg bg-neutral-white dark:bg-gray-800 p-4 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <p class="text-text-secondary dark:text-gray-300">Loading customers...</p>
                        </div>
                    </div>
                </div>
                <div class="flex-1 flex flex-col bg-neutral-white/80 dark:bg-gray-900/80 backdrop-blur-sm overflow-y-auto">
                    <div id="customerDetail" class="p-8">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-16 h-16 bg-center bg-no-repeat bg-cover rounded-xl" data-alt="Customer logo" id="customerLogo" style='background-image: url("data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><rect width=\"100\" height=\"100\" fill=\"%234FA9C6\" opacity=\"0.2\"/><text x=\"50\" y=\"55\" font-family=\"Arial\" font-size=\"20\" fill=\"%234FA9C6\" text-anchor=\"middle\">C</text></svg>");'></div>
                            <div>
                                <h1 id="customerName" class="text-3xl font-bold text-primary dark:text-white">Select a customer</h1>
                                <p id="customerId" class="text-text-secondary dark:text-gray-400">Customer ID: -</p>
                            </div>
                        </div>
                        <div class="border-b border-gray-200 dark:border-gray-700">
                            <nav aria-label="Tabs" class="-mb-px flex space-x-8">
                                <a class="border-pacific-blue text-pacific-blue whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm cursor-pointer" onclick="showTab('contact')">Contact Info</a>
                                <a class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-500 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm cursor-pointer" onclick="showTab('orders')">Work Orders</a>
                                <a class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-500 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm cursor-pointer" onclick="showTab('files')">Files</a>
                            </nav>
                        </div>
                        <div id="contactInfo" class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Primary Contact</h3>
                                <div class="space-y-3 text-text-secondary dark:text-gray-300" id="primaryContact">
                                    <p class="flex items-center gap-3"><span class="material-symbols-outlined text-xl text-pacific-blue">person</span> <span id="contactPerson">-</span></p>
                                    <p class="flex items-center gap-3"><span class="material-symbols-outlined text-xl text-pacific-blue">email</span> <span id="contactEmail">-</span></p>
                                    <p class="flex items-center gap-3"><span class="material-symbols-outlined text-xl text-pacific-blue">phone</span> <span id="contactPhone">-</span></p>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Address</h3>
                                <div class="space-y-1 text-text-secondary dark:text-gray-300" id="customerAddress">
                                    <p id="addressLine1">-</p>
                                    <p id="addressLine2">-</p>
                                    <p id="cityStateZip">-</p>
                                </div>
                            </div>
                        </div>
                        <div id="ordersInfo" class="mt-8 hidden">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Recent Work Orders</h3>
                            <div id="workOrdersList" class="space-y-3">
                                <!-- Work orders will be populated dynamically -->
                                <p class="text-text-secondary dark:text-gray-300">No work orders found.</p>
                            </div>
                        </div>
                        <div id="filesInfo" class="mt-8 hidden">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Customer Files</h3>
                            <div id="filesList" class="space-y-3">
                                <!-- Files will be populated dynamically -->
                                <p class="text-text-secondary dark:text-gray-300">No files found.</p>
                            </div>
                        </div>
                    </div>
                    <div class="px-8 py-6 bg-background-light/80 dark:bg-background-dark/50 mt-auto relative overflow-hidden backdrop-blur-sm">
                        <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Recent Activity</h3>
                        <p id="recentActivity" class="text-sm text-text-secondary dark:text-gray-400">Select a customer to see recent activity.</p>
                    </div>
                </div>
            `;
            
            // Add event listener for the new add customer button
            document.getElementById('addCustomerBtn').addEventListener('click', () => {
                customerModal.classList.remove('hidden');
            });
            
            // Add event listener for customer search
            document.getElementById('customerSearch').addEventListener('input', handleCustomerSearch);
            
            // Load customers
            loadCustomers();
        }
        
        // Load dashboard screen
        function loadDashboard() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Dashboard Overview</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <p class="text-text-secondary dark:text-gray-300 text-sm mb-1">Total Customers</p>
                            <p class="text-3xl font-bold text-primary dark:text-white" id="totalCustomers">0</p>
                        </div>
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <p class="text-text-secondary dark:text-gray-300 text-sm mb-1">Active Orders</p>
                            <p class="text-3xl font-bold text-primary dark:text-white" id="activeOrders">0</p>
                        </div>
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <p class="text-text-secondary dark:text-gray-300 text-sm mb-1">Completed Today</p>
                            <p class="text-3xl font-bold text-primary dark:text-white" id="completedToday">0</p>
                        </div>
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <p class="text-text-secondary dark:text-gray-300 text-sm mb-1">Revenue (30d)</p>
                            <p class="text-3xl font-bold text-primary dark:text-white" id="revenue30d">$0</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white">Recent Activity</h3>
                                <button class="text-pacific-blue text-sm font-medium hover:underline">View All</button>
                            </div>
                            <div class="space-y-4">
                                <div class="flex items-start gap-3">
                                    <div class="size-10 rounded-full bg-pacific-blue/10 flex items-center justify-center flex-shrink-0">
                                        <span class="material-symbols-outlined text-pacific-blue text-sm">receipt_long</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">New order #WO-00789 received from The Cup Company</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">2 minutes ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div class="size-10 rounded-full bg-green-500/10 flex items-center justify-center flex-shrink-0">
                                        <span class="material-symbols-outlined text-green-500 text-sm">check_circle</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">Order #WO-00788 has been completed</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">1 hour ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div class="size-10 rounded-full bg-blue-500/10 flex items-center justify-center flex-shrink-0">
                                        <span class="material-symbols-outlined text-blue-500 text-sm">person_add</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">New customer "Java House" has been registered</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">3 hours ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white">Production Queue</h3>
                                <button class="text-pacific-blue text-sm font-medium hover:underline">View All</button>
                            </div>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="size-10 rounded bg-pacific-blue/10 flex items-center justify-center">
                                            <span class="material-symbols-outlined text-pacific-blue text-sm">local_cafe</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">Custom Coffee Cups</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">WO-00789 • The Cup Company</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium text-text-primary dark:text-white">In Progress</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">60% complete</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="size-10 rounded bg-green-500/10 flex items-center justify-center">
                                            <span class="material-symbols-outlined text-green-500 text-sm">local_dining</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">Premium Dinner Ware</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">WO-00787 • Morning Brew Cafe</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium text-text-primary dark:text-white">Ready</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">100% complete</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="size-10 rounded bg-yellow-500/10 flex items-center justify-center">
                                            <span class="material-symbols-outlined text-yellow-500 text-sm">local_cafe</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">Corporate Event Mugs</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">WO-00790 • Java House</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium text-text-primary dark:text-white">Pending</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">5% complete</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Reload dashboard stats
            loadDashboardStats();
        }
        
        // Load work orders screen
        function loadWorkOrders() {
            // Create the work orders screen with dynamic content
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <div class="flex flex-wrap justify-between gap-4 items-center mb-6">
                        <h2 class="text-2xl font-bold text-primary dark:text-white">Work Orders</h2>
                        <button id="createNewOrderBtn" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-pacific-blue text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-pacific-blue/90 transition-colors">
                            <span class="truncate">Create New Order</span>
                        </button>
                    </div>
                    <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                        <div class="relative w-full max-w-md mb-6">
                            <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary/80 dark:text-gray-400 text-xl">search</span>
                            <input id="workOrdersSearch" class="form-input h-10 w-full rounded-lg bg-background-light dark:bg-background-dark text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-700 pl-10 pr-4 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue" placeholder="Search work orders by ID, customer, or product..." type="search"/>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200 dark:border-gray-700 text-left">
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Order ID</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Customer</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Product</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Status</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Due Date</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="workOrdersTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
                                    <tr>
                                        <td colspan="6" class="py-8 text-center text-text-secondary dark:text-gray-300">
                                            <div class="flex flex-col items-center">
                                                <span class="material-symbols-outlined text-4xl text-gray-300 dark:text-gray-600 mb-2">receipt_long</span>
                                                <p>Loading work orders...</p>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div id="paginationControls" class="mt-6 flex justify-center">
                            <!-- Pagination controls will be added dynamically -->
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listeners for the new elements
            document.getElementById('createNewOrderBtn').addEventListener('click', openCreateOrderModal);
            document.getElementById('workOrdersSearch').addEventListener('input', handleWorkOrdersSearch);
            
            // Load the actual work orders
            loadWorkOrdersFromAPI();
        }
        
        // Function to load work orders from API
        async function loadWorkOrdersFromAPI(searchTerm = '', page = 1, limit = 10) {
            try {
                // In a real implementation, this would connect to a work orders API
                // For now, simulate with mock data
                const mockOrders = [
                    {
                        id: 'WO-00789',
                        customer: 'The Cup Company',
                        product: 'Custom Coffee Cups',
                        status: 'in_progress',
                        due_date: '2024-11-15',
                        customer_id: '1',
                        description: 'Specialty coffee cups with logo printing'
                    },
                    {
                        id: 'WO-00788', 
                        customer: 'Java House',
                        product: 'Espresso Cups',
                        status: 'completed',
                        due_date: '2024-11-10',
                        customer_id: '2',
                        description: 'Premium espresso paper cups with sleeve'
                    },
                    {
                        id: 'WO-00787',
                        customer: 'Morning Brew Cafe',
                        product: 'Premium Dinner Ware',
                        status: 'production',
                        due_date: '2024-11-12',
                        customer_id: '3',
                        description: 'Restaurant quality dinner plates and bowls'
                    },
                    {
                        id: 'WO-00786',
                        customer: 'Café Espresso',
                        product: 'Reusable Drinkware',
                        status: 'pending',
                        due_date: '2024-11-18',
                        customer_id: '4',
                        description: 'Eco-friendly reusable cups and lids'
                    },
                    {
                        id: 'WO-00785',
                        customer: 'Brew & Bites',
                        product: 'Takeout Containers',
                        status: 'shipped',
                        due_date: '2024-11-05',
                        customer_id: '5',
                        description: 'Biodegradable takeout containers'
                    }
                ];
                
                // Filter based on search term
                let filteredOrders = mockOrders;
                if (searchTerm) {
                    filteredOrders = mockOrders.filter(order => 
                        order.id.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        order.customer.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        order.product.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                }
                
                // Pagination
                const startIndex = (page - 1) * limit;
                const endIndex = startIndex + limit;
                const paginatedOrders = filteredOrders.slice(startIndex, endIndex);
                const totalPages = Math.ceil(filteredOrders.length / limit);
                
                // Update the table with orders
                updateWorkOrdersTable(paginatedOrders, totalPages, page);
            } catch (error) {
                console.error('Error loading work orders:', error);
                document.getElementById('workOrdersTableBody').innerHTML = `
                    <tr>
                        <td colspan="6" class="py-8 text-center text-red-500 dark:text-red-400">
                            Error loading work orders: ${error.message}
                        </td>
                    </tr>
                `;
            }
        }
        
        // Function to update the work orders table
        function updateWorkOrdersTable(orders, totalPages, currentPage) {
            const tbody = document.getElementById('workOrdersTableBody');
            
            if (orders.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="py-8 text-center text-text-secondary dark:text-gray-300">
                            <div class="flex flex-col items-center">
                                <span class="material-symbols-outlined text-4xl text-gray-300 dark:text-gray-600 mb-2">receipt_long</span>
                                <p>No work orders found.</p>
                            </div>
                        </td>
                    </tr>
                `;
                document.getElementById('paginationControls').innerHTML = '';
                return;
            }
            
            tbody.innerHTML = orders.map(order => `
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                    <td class="py-4 text-text-primary dark:text-white font-medium cursor-pointer" onclick="viewWorkOrder('${order.id}')">
                        <span class="font-medium text-pacific-blue hover:underline">${order.id}</span>
                    </td>
                    <td class="py-4 text-text-primary dark:text-white cursor-pointer" onclick="viewWorkOrder('${order.id}')">${order.customer}</td>
                    <td class="py-4 text-text-secondary dark:text-gray-300 cursor-pointer" onclick="viewWorkOrder('${order.id}')">${order.product}</td>
                    <td class="py-4">
                        <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium ${
                            order.status === 'completed' ? 'bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300' :
                            order.status === 'in_progress' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300' :
                            order.status === 'production' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300' :
                            order.status === 'shipped' ? 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300' :
                            'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'
                        }">
                            <span class="size-1.5 rounded-full ${
                                order.status === 'completed' ? 'bg-green-500' :
                                order.status === 'in_progress' ? 'bg-yellow-500' :
                                order.status === 'production' ? 'bg-blue-500' :
                                order.status === 'shipped' ? 'bg-indigo-500' :
                                'bg-gray-500'
                            }"></span>
                            ${order.status.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())}
                        </span>
                    </td>
                    <td class="py-4 text-text-secondary dark:text-gray-300 cursor-pointer" onclick="viewWorkOrder('${order.id}')">${new Date(order.due_date).toLocaleDateString()}</td>
                    <td class="py-4">
                        <div class="flex gap-2">
                            <button class="text-pacific-blue hover:text-pacific-blue/80 text-sm font-medium" onclick="viewWorkOrder('${order.id}')">View</button>
                            <button class="text-text-secondary dark:text-gray-400 hover:text-text-primary dark:hover:text-white text-sm font-medium" onclick="openEditOrderModal('${order.id}')">Edit</button>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            // Update pagination controls
            updatePaginationControls(totalPages, currentPage, 'loadWorkOrdersFromAPI');
        }
        
        // Function to handle work orders search
        function handleWorkOrdersSearch(e) {
            const searchTerm = e.target.value;
            loadWorkOrdersFromAPI(searchTerm);
        }
        
        // Function to update pagination controls
        function updatePaginationControls(totalPages, currentPage, loadFunction) {
            const paginationDiv = document.getElementById('paginationControls');
            
            if (totalPages <= 1) {
                paginationDiv.innerHTML = '';
                return;
            }
            
            let paginationHTML = '<div class="flex items-center gap-2">';
            
            // Previous button
            if (currentPage > 1) {
                paginationHTML += `<button class="flex items-center justify-center size-8 rounded-lg border border-gray-200 dark:border-gray-700 text-text-primary dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" onclick="${loadFunction}('', ${currentPage - 1})">←</button>`;
            } else {
                paginationHTML += `<span class="flex items-center justify-center size-8 rounded-lg border border-gray-200 dark:border-gray-700 text-text-secondary dark:text-gray-400">←</span>`;
            }
            
            // Page numbers
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, currentPage + 2);
            
            for (let i = startPage; i <= endPage; i++) {
                if (i === currentPage) {
                    paginationHTML += `<span class="flex items-center justify-center size-8 rounded-lg bg-pacific-blue text-white font-semibold">${i}</span>`;
                } else {
                    paginationHTML += `<button class="flex items-center justify-center size-8 rounded-lg border border-gray-200 dark:border-gray-700 text-text-primary dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" onclick="${loadFunction}('', ${i})">${i}</button>`;
                }
            }
            
            // Next button
            if (currentPage < totalPages) {
                paginationHTML += `<button class="flex items-center justify-center size-8 rounded-lg border border-gray-200 dark:border-gray-700 text-text-primary dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" onclick="${loadFunction}('', ${currentPage + 1})">→</button>`;
            } else {
                paginationHTML += `<span class="flex items-center justify-center size-8 rounded-lg border border-gray-200 dark:border-gray-700 text-text-secondary dark:text-gray-400">→</span>`;
            }
            
            paginationHTML += '</div>';
            paginationDiv.innerHTML = paginationHTML;
        }
        
        // Function to open Create Order modal
        function openCreateOrderModal() {
            // In a real implementation, this would open a create order form
            alert('Create New Order functionality would open here');
        }
        
        // Function to view work order details
        function viewWorkOrder(orderId) {
            // In a real implementation, this would show the order details
            alert('Work order ' + orderId + ' details view would open here');
        }
        
        // Function to open Edit Order modal
        function openEditOrderModal(orderId) {
            // In a real implementation, this would open an edit form for the order
            alert('Edit work order ' + orderId + ' functionality would open here');
        }
        
        // Function to toggle profile menu (for the user profile dropdown)
        function toggleProfileMenu() {
            // This is handled by the CSS hover effect, but we can add JavaScript if needed
            // Currently relying on the CSS hover effect for simplicity
        }
        
        // Load production screen
        function loadProduction() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Production Tracking</h2>
                    <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)] mb-6">
                        <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Current Production Queue</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-lg">
                                <div class="flex items-center gap-3">
                                    <div class="size-10 rounded bg-pacific-blue/10 flex items-center justify-center">
                                        <span class="material-symbols-outlined text-pacific-blue text-sm">local_cafe</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">Custom Coffee Cups</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">WO-00789 • The Cup Company</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="font-medium text-text-primary dark:text-white">In Progress</p>
                                    <p class="text-text-secondary dark:text-gray-300 text-sm">60% complete</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-lg">
                                <div class="flex items-center gap-3">
                                    <div class="size-10 rounded bg-green-500/10 flex items-center justify-center">
                                        <span class="material-symbols-outlined text-green-500 text-sm">local_dining</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">Premium Dinner Ware</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">WO-00787 • Morning Brew Cafe</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="font-medium text-text-primary dark:text-white">Ready</p>
                                    <p class="text-text-secondary dark:text-gray-300 text-sm">100% complete</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-lg">
                                <div class="flex items-center gap-3">
                                    <div class="size-10 rounded bg-yellow-500/10 flex items-center justify-center">
                                        <span class="material-symbols-outlined text-yellow-500 text-sm">local_cafe</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">Corporate Event Mugs</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">WO-00790 • Java House</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="font-medium text-text-primary dark:text-white">Pending</p>
                                    <p class="text-text-secondary dark:text-gray-300 text-sm">5% complete</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Production Stats</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between">
                                    <span class="text-text-secondary dark:text-gray-300">Capacity Utilization</span>
                                    <span class="font-medium text-text-primary dark:text-white">78%</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                    <div class="bg-pacific-blue h-2 rounded-full" style="width: 78%"></div>
                                </div>
                                
                                <div class="flex justify-between mt-4">
                                    <span class="text-text-secondary dark:text-gray-300">On-Time Delivery</span>
                                    <span class="font-medium text-text-primary dark:text-white">94%</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 94%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Recent Updates</h3>
                            <div class="space-y-3">
                                <div class="flex items-start gap-3">
                                    <div class="size-2 rounded-full bg-green-500 mt-2 flex-shrink-0"></div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">WO-00788 moved to Quality Check</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">10 minutes ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div class="size-2 rounded-full bg-blue-500 mt-2 flex-shrink-0"></div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">WO-00789 material received</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">45 minutes ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div class="size-2 rounded-full bg-yellow-500 mt-2 flex-shrink-0"></div>
                                    <div>
                                        <p class="font-medium text-text-primary dark:text-white">WO-00790 design approved</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">2 hours ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Load reports screen
        function loadReports() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Reports & Analytics</h2>
                    <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)] mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white">Sales Performance</h3>
                            <div class="flex gap-2">
                                <select class="form-select rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white border-gray-200 dark:border-gray-600 px-3 py-1.5 text-sm">
                                    <option>Last 7 Days</option>
                                    <option selected>Last 30 Days</option>
                                    <option>Last 90 Days</option>
                                    <option>Year to Date</option>
                                </select>
                            </div>
                        </div>
                        <div class="h-64 flex items-center justify-center bg-background-light dark:bg-background-dark rounded-lg">
                            <p class="text-text-secondary dark:text-gray-300">Sales chart would be displayed here</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Top Customers</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-text-primary dark:text-white">The Cup Company</span>
                                    <span class="font-medium text-text-primary dark:text-white">$24,500</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-text-primary dark:text-white">Java House</span>
                                    <span class="font-medium text-text-primary dark:text-white">$18,300</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-text-primary dark:text-white">Morning Brew Cafe</span>
                                    <span class="font-medium text-text-primary dark:text-white">$15,200</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-text-primary dark:text-white">Café Espresso</span>
                                    <span class="font-medium text-text-primary dark:text-white">$12,400</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-text-primary dark:text-white">Brew & Bites</span>
                                    <span class="font-medium text-text-primary dark:text-white">$9,800</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Production Efficiency</h3>
                            <div class="h-64 flex items-center justify-center bg-background-light dark:bg-background-dark rounded-lg">
                                <p class="text-text-secondary dark:text-gray-300">Efficiency chart would be displayed here</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Load settings screen
        function loadSettings() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">System Settings</h2>
                    <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                        <div class="space-y-6">
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-3">General Settings</h3>
                                <div class="space-y-4">
                                    <div class="flex flex-wrap justify-between items-center gap-4">
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">Production Notifications</p>
                                            <p class="text-sm text-text-secondary dark:text-gray-300">Receive alerts for production updates</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pacific-blue"></div>
                                        </label>
                                    </div>
                                    
                                    <div class="flex flex-wrap justify-between items-center gap-4">
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">Email Notifications</p>
                                            <p class="text-sm text-text-secondary dark:text-gray-300">Receive email updates for important events</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pacific-blue"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-3">Production Settings</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary dark:text-white mb-2">Default Production Time (hours)</label>
                                        <input type="number" value="24" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary dark:text-white mb-2">Production Capacity (% of maximum)</label>
                                        <input type="range" min="50" max="100" value="85" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                        <div class="flex justify-between text-xs text-text-secondary dark:text-gray-300 mt-1">
                                            <span>50%</span>
                                            <span>85%</span>
                                            <span>100%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex justify-end">
                                <button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-pacific-blue text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-pacific-blue/90 transition-colors">
                                    Save Changes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Load communication screen
        function loadCommunication() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Communication Hub</h2>
                    <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                        <div class="flex justify-between items-center mb-6">
                            <div class="relative w-full max-w-md">
                                <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary/80 dark:text-gray-400 text-xl">search</span>
                                <input class="form-input h-10 w-full rounded-lg bg-background-light dark:bg-background-dark text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-700 pl-10 pr-4 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue" placeholder="Search messages, customers, topics..." type="search"/>
                            </div>
                            <button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-pacific-blue text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-pacific-blue/90 transition-colors">
                                New Message
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-1">
                                <div class="bg-background-light dark:bg-background-dark rounded-lg p-4">
                                    <h3 class="font-semibold text-text-primary dark:text-white mb-4">Recent Conversations</h3>
                                    <div class="space-y-3">
                                        <div class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer">
                                            <div class="size-10 rounded-full bg-pacific-blue/10 flex items-center justify-center">
                                                <span class="material-symbols-outlined text-pacific-blue text-sm">local_cafe</span>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <p class="font-medium text-text-primary dark:text-white truncate">The Cup Company</p>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm truncate">Regarding order #WO-00789...</p>
                                            </div>
                                            <span class="text-xs text-text-secondary dark:text-gray-300">10m ago</span>
                                        </div>
                                        <div class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer">
                                            <div class="size-10 rounded-full bg-green-500/10 flex items-center justify-center">
                                                <span class="material-symbols-outlined text-green-500 text-sm">local_dining</span>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <p class="font-medium text-text-primary dark:text-white truncate">Java House</p>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm truncate">Status update for WO-00787</p>
                                            </div>
                                            <span class="text-xs text-text-secondary dark:text-gray-300">1h ago</span>
                                        </div>
                                        <div class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer">
                                            <div class="size-10 rounded-full bg-yellow-500/10 flex items-center justify-center">
                                                <span class="material-symbols-outlined text-yellow-500 text-sm">storefront</span>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <p class="font-medium text-text-primary dark:text-white truncate">Supply Chain Team</p>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm truncate">Material delivery update</p>
                                            </div>
                                            <span class="text-xs text-text-secondary dark:text-gray-300">3h ago</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="lg:col-span-2">
                                <div class="bg-background-light dark:bg-background-dark rounded-lg p-4 h-96 flex flex-col">
                                    <div class="flex items-center gap-3 mb-4">
                                        <div class="size-10 rounded-full bg-pacific-blue/10 flex items-center justify-center">
                                            <span class="material-symbols-outlined text-pacific-blue text-sm">local_cafe</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">The Cup Company</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">Online</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex-1 overflow-y-auto space-y-4 mb-4">
                                        <div class="flex justify-start">
                                            <div class="max-w-xs lg:max-w-md px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg">
                                                <p class="text-text-primary dark:text-white">Hi, I wanted to check on the status of my order #WO-00789.</p>
                                                <p class="text-xs text-text-secondary dark:text-gray-300 mt-1">10:30 AM</p>
                                            </div>
                                        </div>
                                        <div class="flex justify-end">
                                            <div class="max-w-xs lg:max-w-md px-4 py-2 bg-pacific-blue text-white rounded-lg">
                                                <p>Your order is currently in production and is 60% complete. Expected completion date is Nov 15.</p>
                                                <p class="text-xs text-pacific-blue/80 mt-1">10:32 AM</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex gap-2">
                                        <input type="text" placeholder="Type a message..." class="flex-1 rounded-lg bg-white dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                                        <button class="size-10 rounded-lg bg-pacific-blue text-white flex items-center justify-center hover:bg-pacific-blue/90">
                                            <span class="material-symbols-outlined">send</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Load shipping screen
        function loadShipping() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Shipping & Logistics</h2>
                    <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)] mb-6">
                        <div class="flex flex-wrap justify-between gap-4 items-center mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white">Shipping Queue</h3>
                                <p class="text-text-secondary dark:text-gray-300 text-sm">Items ready for shipment</p>
                            </div>
                            <button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-pacific-blue text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-pacific-blue/90 transition-colors">
                                Create Shipment
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200 dark:border-gray-700 text-left">
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Order ID</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Customer</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Destination</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Status</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Ship Date</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                    <tr>
                                        <td class="py-4 text-text-primary dark:text-white font-medium">WO-00788</td>
                                        <td class="py-4 text-text-primary dark:text-white">Java House</td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">123 Coffee St, Seattle, WA</td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300">
                                                <span class="size-1.5 rounded-full bg-green-500"></span>
                                                Shipped
                                            </span>
                                        </td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">Nov 10, 2024</td>
                                    </tr>
                                    <tr>
                                        <td class="py-4 text-text-primary dark:text-white font-medium">WO-00789</td>
                                        <td class="py-4 text-text-primary dark:text-white">The Cup Company</td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">456 Bean Ave, Portland, OR</td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300">
                                                <span class="size-1.5 rounded-full bg-yellow-500"></span>
                                                Processing
                                            </span>
                                        </td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">Nov 15, 2024</td>
                                    </tr>
                                    <tr>
                                        <td class="py-4 text-text-primary dark:text-white font-medium">WO-00790</td>
                                        <td class="py-4 text-text-primary dark:text-white">Java House</td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">789 Roast Blvd, San Francisco, CA</td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300">
                                                <span class="size-1.5 rounded-full bg-blue-500"></span>
                                                Ready
                                            </span>
                                        </td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">Nov 12, 2024</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Shipping Stats</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between">
                                    <span class="text-text-secondary dark:text-gray-300">On-Time Delivery</span>
                                    <span class="font-medium text-text-primary dark:text-white">94%</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 94%"></div>
                                </div>
                                
                                <div class="flex justify-between mt-4">
                                    <span class="text-text-secondary dark:text-gray-300">Avg. Transit Time</span>
                                    <span class="font-medium text-text-primary dark:text-white">2.3 days</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                    <div class="bg-pacific-blue h-2 rounded-full" style="width: 78%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Carrier Partners</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-background-light dark:bg-background-dark rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="size-10 rounded bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
                                            <span class="font-bold text-text-primary dark:text-white">UP</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">UPS</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">Priority Shipping</p>
                                        </div>
                                    </div>
                                    <span class="text-green-500 font-medium">96%</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-background-light dark:bg-background-dark rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="size-10 rounded bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
                                            <span class="font-bold text-text-primary dark:text-white">FE</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">FedEx</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">Express Shipping</p>
                                        </div>
                                    </div>
                                    <span class="text-green-500 font-medium">92%</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-background-light dark:bg-background-dark rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="size-10 rounded bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
                                            <span class="font-bold text-text-primary dark:text-white">US</span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">USPS</p>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm">Standard Shipping</p>
                                        </div>
                                    </div>
                                    <span class="text-yellow-500 font-medium">85%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Load help screen
        function loadHelp() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Help & Support</h2>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2">
                            <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)] mb-6">
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Search Help Topics</h3>
                                <div class="relative">
                                    <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary/80 dark:text-gray-400 text-xl">search</span>
                                    <input class="form-input w-full rounded-lg bg-background-light dark:bg-background-dark text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-700 pl-10 pr-4 py-3 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue" placeholder="What can we help you with?" type="search"/>
                                </div>
                            </div>
                            
                            <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Popular Topics</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-pacific-blue text-xl">person_add</span>
                                            <div>
                                                <h4 class="font-medium text-text-primary dark:text-white">Adding New Customers</h4>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">Step-by-step guide to register new customers in the system</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-pacific-blue text-xl">receipt_long</span>
                                            <div>
                                                <h4 class="font-medium text-text-primary dark:text-white">Creating Work Orders</h4>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">Learn how to create and manage work orders</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-pacific-blue text-xl">inventory_2</span>
                                            <div>
                                                <h4 class="font-medium text-text-primary dark:text-white">Production Tracking</h4>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">Track and update production status</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-pacific-blue text-xl">settings</span>
                                            <div>
                                                <h4 class="font-medium text-text-primary dark:text-white">System Configuration</h4>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">Configure system settings and preferences</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)] mb-6">
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Contact Support</h3>
                                <div class="space-y-4">
                                    <div class="flex items-start gap-3">
                                        <span class="material-symbols-outlined text-pacific-blue text-xl">chat</span>
                                        <div>
                                            <h4 class="font-medium text-text-primary dark:text-white">Live Chat</h4>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">Chat with our support team instantly</p>
                                            <button class="mt-2 text-pacific-blue text-sm font-medium hover:underline">Start Chat</button>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-3">
                                        <span class="material-symbols-outlined text-pacific-blue text-xl">mail</span>
                                        <div>
                                            <h4 class="font-medium text-text-primary dark:text-white">Email Support</h4>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">support@example.com</p>
                                            <button class="mt-2 text-pacific-blue text-sm font-medium hover:underline">Send Email</button>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-3">
                                        <span class="material-symbols-outlined text-pacific-blue text-xl">phone</span>
                                        <div>
                                            <h4 class="font-medium text-text-primary dark:text-white">Phone Support</h4>
                                            <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">1-800-123-4567</p>
                                            <button class="mt-2 text-pacific-blue text-sm font-medium hover:underline">Call Now</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">System Status</h3>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="size-2 rounded-full bg-green-500"></span>
                                    <span class="text-text-primary dark:text-white text-sm">All Systems Operational</span>
                                </div>
                                <div class="text-text-secondary dark:text-gray-300 text-xs">
                                    Last checked: Just now
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Add event listeners for sidebar navigation after all functions are defined
        document.addEventListener('DOMContentLoaded', function() {
            // Add the sidebar navigation event listeners after all functions are defined
            document.querySelectorAll('aside a').forEach(link => {
                // Check if the link already has an onclick attribute
                if (!link.getAttribute('onclick')) {
                    // Only add listener to links that don't have onclick set (like settings/help icons in headers)
                } else {
                    // For links with onclick, make sure they work properly
                    const originalOnclick = link.getAttribute('onclick');
                    if (originalOnclick && (originalOnclick.includes('loadScreen') || originalOnclick.includes('handleLogout'))) {
                        // These should work as they have onclick attributes already
                    }
                }
            });
            
            // Add event listeners that might have been missed
            const addCustomerBtn = document.getElementById('addCustomerBtn');
            if (addCustomerBtn) {
                addCustomerBtn.addEventListener('click', () => {
                    document.getElementById('customerModal').classList.remove('hidden');
                });
            }
            
            // Add for any cancel buttons
            const cancelBtn = document.getElementById('cancelBtn');
            if (cancelBtn) {
                cancelBtn.addEventListener('click', () => {
                    document.getElementById('customerModal').classList.add('hidden');
                });
            }
            
            // Add for done button in success modal
            const doneBtn = document.getElementById('doneBtn');
            if (doneBtn) {
                doneBtn.addEventListener('click', () => {
                    document.getElementById('successModal').classList.add('hidden');
                });
            }
            
            // Logout modal buttons
            const confirmLogoutBtn = document.getElementById('confirmLogoutBtn');
            const cancelLogoutBtn = document.getElementById('cancelLogoutBtn');
            if (confirmLogoutBtn) {
                confirmLogoutBtn.addEventListener('click', () => {
                    document.getElementById('logoutModal').classList.add('hidden');
                    // In a real app, you would actually logout here
                    alert('Logged out successfully');
                });
            }
            if (cancelLogoutBtn) {
                cancelLogoutBtn.addEventListener('click', () => {
                    document.getElementById('logoutModal').classList.add('hidden');
                });
            }
            
            // Add global search listener if it exists
            const globalSearch = document.getElementById('globalSearch');
            if (globalSearch) {
                globalSearch.addEventListener('input', handleGlobalSearch);
            }
            
            // Add customer search listener if we're on customer management screen
            const customerSearch = document.getElementById('customerSearch');
            if (customerSearch) {
                customerSearch.addEventListener('input', handleCustomerSearch);
            }
        });
        
        // Load all customers from the backend
        async function loadCustomers(searchTerm = '') {
            try {
                let url = API_BASE_URL;
                if (searchTerm) {
                    url += `?search=${encodeURIComponent(searchTerm)}`;
                }
                
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                displayCustomers(data.items);
            } catch (error) {
                console.error('Error fetching customers:', error);
                document.getElementById('customerList').innerHTML = `<div class="flex items-stretch justify-between gap-4 rounded-lg bg-red-50 dark:bg-red-900/20 p-4 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                    <p class="text-red-600 dark:text-red-300">Error loading customers: ${error.message}</p>
                </div>`;
            }
        }
        
        // Display customers in the list
        function displayCustomers(customers) {
            const customerList = document.getElementById('customerList');
            
            if (!customers || customers.length === 0) {
                customerList.innerHTML = `<div class="flex items-stretch justify-between gap-4 rounded-lg bg-neutral-white dark:bg-gray-800 p-4 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                    <p class="text-text-secondary dark:text-gray-300">No customers found.</p>
                </div>`;
                return;
            }
            
            customerList.innerHTML = customers.map(customer => `
                <div class="rounded-lg bg-neutral-white dark:bg-gray-800 p-4 shadow-[0_2px_8px_rgba(0,0,0,0.05)] cursor-pointer hover:shadow-lg hover:ring-2 hover:ring-pacific-blue/50 transition-all" 
                    onclick="selectCustomer('${customer.id}')" 
                    data-customer-id="${customer.id}">
                    <div class="flex items-start justify-between gap-4">
                        <div class="flex flex-col gap-3">
                            <div class="flex flex-col gap-1">
                                <p class="text-text-primary dark:text-white text-base font-bold leading-tight">${escapeHtml(customer.company_name)}</p>
                                <p class="text-text-secondary dark:text-gray-400 text-sm font-normal leading-normal">${escapeHtml(customer.email)}</p>
                            </div>
                            <div class="flex gap-6 text-sm">
                                <div>
                                    <p class="text-text-secondary dark:text-gray-400 text-xs">Total Orders</p>
                                    <p class="font-medium text-text-primary dark:text-white">${customer.total_orders_count || 0}</p>
                                </div>
                                <div>
                                    <p class="text-text-secondary dark:text-gray-400 text-xs">Status</p>
                                    <p class="font-medium text-text-primary dark:text-white">${escapeHtml(customer.status)}</p>
                                </div>
                            </div>
                        </div>
                        <a class="view-files-btn flex items-center gap-2 text-sm font-semibold text-pacific-blue hover:underline" href="#" onclick="event.stopPropagation(); openFiles('${customer.id}');">
                            <span class="material-symbols-outlined text-lg">folder_open</span>
                            View Files
                        </a>
                    </div>
                </div>
            `).join('');
        }
        
        // Select a customer and show details
        async function selectCustomer(customerId) {
            try {
                const response = await fetch(`${API_BASE_URL}/${customerId}`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const customer = await response.json();
                displayCustomerDetails(customer);
                
                // Highlight selected customer in the list
                document.querySelectorAll('#customerList div').forEach(el => {
                    el.classList.remove('bg-pacific-blue/10', 'border-2', 'border-pacific-blue');
                });
                
                const selectedElement = document.querySelector(`[data-customer-id="${customerId}"]`);
                if (selectedElement) {
                    selectedElement.classList.add('bg-pacific-blue/10', 'border-2', 'border-pacific-blue');
                }
            } catch (error) {
                console.error('Error fetching customer details:', error);
                // Show error in the UI
                document.getElementById('customerName').textContent = 'Error loading customer';
                document.getElementById('customerId').textContent = 'ID: -';
            }
        }
        
        // Display customer details
        function displayCustomerDetails(customer) {
            document.getElementById('customerName').textContent = customer.company_name;
            document.getElementById('customerId').textContent = `Customer ID: ${customer.id}`;
            
            document.getElementById('contactPerson').textContent = customer.contact_person;
            document.getElementById('contactEmail').textContent = customer.email;
            document.getElementById('contactPhone').textContent = customer.phone || '-';
            
            document.getElementById('addressLine1').textContent = customer.address_line1 || '-';
            document.getElementById('addressLine2').textContent = customer.address_line2 || '';
            document.getElementById('cityStateZip').textContent = `${customer.city || ''}${customer.city && (customer.state_province || customer.postal_code) ? ', ' : ''}${customer.state_province || ''}${customer.state_province && customer.postal_code ? ' ' : ''}${customer.postal_code || ''}`.trim() || '-';
            
            document.getElementById('recentActivity').textContent = `Last updated: ${new Date(customer.updated_at).toLocaleDateString()}`;
        }
        
        // Handle adding a new customer
        async function handleAddCustomer(e) {
            e.preventDefault();
            
            const newCustomer = {
                company_name: document.getElementById('companyName').value,
                contact_person: document.getElementById('contactPersonInput').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value || null,
                city: document.getElementById('city').value || null,
                notes: document.getElementById('notes').value || null
            };
            
            try {
                const response = await fetch(API_BASE_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(newCustomer)
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.detail || `HTTP error! status: ${response.status}`);
                }
                
                const createdCustomer = await response.json();
                
                // Close the add customer modal
                customerModal.classList.add('hidden');
                
                // Update success modal with customer name
                document.getElementById('successTitle').textContent = `Customer Created Successfully`;
                document.getElementById('successMessage').textContent = `The customer '${escapeHtml(newCustomer.company_name)}' has been created and the following file structure has been automatically generated.`;
                
                // Show the success modal
                successModal.classList.remove('hidden');
                
                // Reload customers list if on customer management screen
                if (document.querySelector('#customerList')) {
                    loadCustomers();
                }
                
            } catch (error) {
                console.error('Error creating customer:', error);
                alert(`Error creating customer: ${error.message}`);
            }
        }
        
        // Handle customer search
        function handleCustomerSearch(e) {
            const searchTerm = e.target.value;
            loadCustomers(searchTerm);
        }
        
        // Handle global search
        function handleGlobalSearch(e) {
            const searchTerm = e.target.value;
            // For now, just log the search - in a full implementation this would search across all entities
            console.log('Global search:', searchTerm);
            // In a real implementation, this would search across customers, orders, etc.
            if (searchTerm.length > 2) {
                // Could implement search across all entities
                loadCustomers(searchTerm); // For now, just search customers when on customer screen
            } else if (searchTerm.length === 0) {
                loadCustomers(); // Reload all customers when search is cleared
            }
        }
        
        // Handle customer search specifically
        function handleCustomerSearch(e) {
            const searchTerm = e.target.value;
            loadCustomers(searchTerm);
        }
        
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all content sections
            document.getElementById('contactInfo').classList.add('hidden');
            document.getElementById('ordersInfo').classList.add('hidden');
            document.getElementById('filesInfo').classList.add('hidden');
            
            // Remove active class from all tabs
            document.querySelector('.border-pacific-blue').classList.remove('border-pacific-blue', 'text-pacific-blue');
            
            // Add active class to clicked tab and show corresponding content
            if (tabName === 'contact') {
                document.querySelector('[onclick="showTab(\'contact\')"]').classList.add('border-pacific-blue', 'text-pacific-blue');
                document.getElementById('contactInfo').classList.remove('hidden');
            } else if (tabName === 'orders') {
                document.querySelector('[onclick="showTab(\'orders\')"]').classList.add('border-pacific-blue', 'text-pacific-blue');
                document.getElementById('ordersInfo').classList.remove('hidden');
            } else if (tabName === 'files') {
                document.querySelector('[onclick="showTab(\'files\')"]').classList.add('border-pacific-blue', 'text-pacific-blue');
                document.getElementById('filesInfo').classList.remove('hidden');
            }
        }
        
        // Function to open files interface for a customer
        function openFiles(customerId) {
            alert('File management interface for customer ' + customerId + ' would open here');
        }
        
        // Function to handle logout
        function handleLogout(e) {
            e.preventDefault();
            document.getElementById('logoutModal').classList.remove('hidden');
        }
        
        // Add event listeners for all modal close buttons that might be missing
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners that might have been missed
            const addCustomerBtn = document.getElementById('addCustomerBtn');
            if (addCustomerBtn) {
                addCustomerBtn.addEventListener('click', () => {
                    document.getElementById('customerModal').classList.remove('hidden');
                });
            }
            
            // Add for any cancel buttons
            const cancelBtn = document.getElementById('cancelBtn');
            if (cancelBtn) {
                cancelBtn.addEventListener('click', () => {
                    document.getElementById('customerModal').classList.add('hidden');
                });
            }
            
            // Add for done button in success modal
            const doneBtn = document.getElementById('doneBtn');
            if (doneBtn) {
                doneBtn.addEventListener('click', () => {
                    document.getElementById('successModal').classList.add('hidden');
                });
            }
            
            // Logout modal buttons
            const confirmLogoutBtn = document.getElementById('confirmLogoutBtn');
            const cancelLogoutBtn = document.getElementById('cancelLogoutBtn');
            if (confirmLogoutBtn) {
                confirmLogoutBtn.addEventListener('click', () => {
                    document.getElementById('logoutModal').classList.add('hidden');
                    // In a real app, you would actually logout here
                    // Redirect to login page or clear session/cookies
                    window.location.href = '/';  // Redirect to homepage or login
                });
            }
            if (cancelLogoutBtn) {
                cancelLogoutBtn.addEventListener('click', () => {
                    document.getElementById('logoutModal').classList.add('hidden');
                });
            }
            
            // Add global search listener if it exists
            const globalSearch = document.getElementById('globalSearch');
            if (globalSearch) {
                globalSearch.addEventListener('input', handleGlobalSearch);
            }
            
            // Add customer search listener if we're on customer management screen
            const customerSearch = document.getElementById('customerSearch');
            if (customerSearch) {
                customerSearch.addEventListener('input', handleCustomerSearch);
            }
            
            // Add work orders search listener if we're on work orders screen
            const workOrdersSearch = document.getElementById('workOrdersSearch');
            if (workOrdersSearch) {
                workOrdersSearch.addEventListener('input', handleWorkOrdersSearch);
            }
        });
        
        // Add the missing functions that handle screen navigation
        
        // Tab switching functionality (improved)
        function showTab(tabName) {
            // Hide all content sections
            const contactInfo = document.getElementById('contactInfo');
            const ordersInfo = document.getElementById('ordersInfo');
            const filesInfo = document.getElementById('filesInfo');
            
            if (contactInfo) contactInfo.classList.add('hidden');
            if (ordersInfo) ordersInfo.classList.add('hidden');
            if (filesInfo) filesInfo.classList.add('hidden');
            
            // Remove active class from all tabs
            const allTabs = document.querySelectorAll('.border-pacific-blue.text-pacific-blue');
            allTabs.forEach(tab => {
                tab.classList.remove('border-pacific-blue', 'text-pacific-blue');
            });
            
            // Add active class to clicked tab and show corresponding content
            if (tabName === 'contact' && contactInfo) {
                const contactTab = document.querySelector('[onclick*="showTab(\'contact\')"]');
                if (contactTab) contactTab.classList.add('border-pacific-blue', 'text-pacific-blue');
                contactInfo.classList.remove('hidden');
            } else if (tabName === 'orders' && ordersInfo) {
                const ordersTab = document.querySelector('[onclick*="showTab(\'orders\')"]');
                if (ordersTab) ordersTab.classList.add('border-pacific-blue', 'text-pacific-blue');
                ordersInfo.classList.remove('hidden');
            } else if (tabName === 'files' && filesInfo) {
                const filesTab = document.querySelector('[onclick*="showTab(\'files\')"]');
                if (filesTab) filesTab.classList.add('border-pacific-blue', 'text-pacific-blue');
                filesInfo.classList.remove('hidden');
            }
        }
        
        // Add event listeners for all modal close buttons that might be missing
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners that might have been missed
            const addCustomerBtn = document.getElementById('addCustomerBtn');
            if (addCustomerBtn) {
                addCustomerBtn.addEventListener('click', () => {
                    document.getElementById('customerModal').classList.remove('hidden');
                });
            }
            
            // Add for any cancel buttons
            const cancelBtn = document.getElementById('cancelBtn');
            if (cancelBtn) {
                cancelBtn.addEventListener('click', () => {
                    document.getElementById('customerModal').classList.add('hidden');
                });
            }
            
            // Add for done button in success modal
            const doneBtn = document.getElementById('doneBtn');
            if (doneBtn) {
                doneBtn.addEventListener('click', () => {
                    document.getElementById('successModal').classList.add('hidden');
                });
            }
            
            // Logout modal buttons
            const confirmLogoutBtn = document.getElementById('confirmLogoutBtn');
            const cancelLogoutBtn = document.getElementById('cancelLogoutBtn');
            if (confirmLogoutBtn) {
                confirmLogoutBtn.addEventListener('click', () => {
                    document.getElementById('logoutModal').classList.add('hidden');
                    // In a real app, you would actually logout here
                    alert('Logged out successfully');
                });
            }
            if (cancelLogoutBtn) {
                cancelLogoutBtn.addEventListener('click', () => {
                    document.getElementById('logoutModal').classList.add('hidden');
                });
            }
            
            // Add global search listener if it exists
            const globalSearch = document.getElementById('globalSearch');
            if (globalSearch) {
                globalSearch.addEventListener('input', handleGlobalSearch);
            }
            
            // Add customer search listener if we're on customer management screen
            const customerSearch = document.getElementById('customerSearch');
            if (customerSearch) {
                customerSearch.addEventListener('input', handleCustomerSearch);
            }
        });
        
        // Helper function to escape HTML
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
        
        // Load account settings screen
        function loadAccountSettings() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Account Settings</h2>
                    <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                        <div class="space-y-6">
                            <!-- Profile Information Section -->
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Profile Information</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Full Name</label>
                                        <input type="text" id="fullName" value="Alex Chen" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Email Address</label>
                                        <input type="email" id="emailAddress" value="alex.chen@pacific.com" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Phone Number</label>
                                        <input type="tel" id="phoneNumber" value="+1 (555) 123-4567" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Role</label>
                                        <input type="text" value="Production Manager" disabled class="form-input w-full rounded-lg bg-gray-100 dark:bg-gray-700 text-text-secondary dark:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm cursor-not-allowed">
                                    </div>
                                </div>
                            </div>

                            <!-- Password Management Section -->
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Change Password</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Current Password</label>
                                        <input type="password" placeholder="Enter current password" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">New Password</label>
                                            <input type="password" placeholder="Enter new password" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-text-primary dark:text-white mb-1">Confirm New Password</label>
                                            <input type="password" placeholder="Confirm new password" class="form-input w-full rounded-lg bg-background-light dark:bg-gray-700 text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-600 px-3 py-2 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Notification Preferences Section -->
                            <div>
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Notification Preferences</h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">New Production Order Alerts</p>
                                            <p class="text-sm text-text-secondary dark:text-gray-400">Receive notifications for new production orders</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pacific-blue"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">System Maintenance Updates</p>
                                            <p class="text-sm text-text-secondary dark:text-gray-400">Receive notifications about system maintenance</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pacific-blue"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="font-medium text-text-primary dark:text-white">Weekly Summary Report</p>
                                            <p class="text-sm text-text-secondary dark:text-gray-400">Receive weekly summary reports via email</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pacific-blue"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex justify-end items-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                                <button class="px-6 py-2.5 rounded-lg text-text-primary dark:text-gray-200 font-medium bg-neutral-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors">Cancel</button>
                                <button class="px-6 py-2.5 rounded-lg text-white font-medium bg-primary hover:bg-primary/90 transition-colors">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Load admin dashboard screen
        function loadAdminDashboard() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Admin Dashboard</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)] cursor-pointer hover:shadow-lg transition-shadow" onclick="loadScreen('user-management')">
                            <div class="flex items-center gap-4">
                                <div class="size-12 rounded-lg bg-pacific-blue/10 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-pacific-blue text-xl">group</span>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-text-primary dark:text-white">User Management</h3>
                                    <p class="text-text-secondary dark:text-gray-300 text-sm">Manage users and permissions</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)] cursor-pointer hover:shadow-lg transition-shadow" onclick="loadScreen('role-permissions')">
                            <div class="flex items-center gap-4">
                                <div class="size-12 rounded-lg bg-green-500/10 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-green-500 text-xl">admin_panel_settings</span>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-text-primary dark:text-white">Roles & Permissions</h3>
                                    <p class="text-text-secondary dark:text-gray-300 text-sm">Configure system roles</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)] cursor-pointer hover:shadow-lg transition-shadow">
                            <div class="flex items-center gap-4">
                                <div class="size-12 rounded-lg bg-blue-500/10 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-blue-500 text-xl">analytics</span>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-text-primary dark:text-white">System Analytics</h3>
                                    <p class="text-text-secondary dark:text-gray-300 text-sm">Monitor system performance</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Recent Activity</h3>
                            <div class="space-y-4">
                                <div class="flex items-start gap-3">
                                    <div class="size-2 rounded-full bg-green-500 mt-2 flex-shrink-0"></div>
                                    <div class="flex-1">
                                        <p class="font-medium text-text-primary dark:text-white">New user "John Smith" created</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">2 minutes ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div class="size-2 rounded-full bg-blue-500 mt-2 flex-shrink-0"></div>
                                    <div class="flex-1">
                                        <p class="font-medium text-text-primary dark:text-white">Role "Production Manager" updated</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">1 hour ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <div class="size-2 rounded-full bg-yellow-500 mt-2 flex-shrink-0"></div>
                                    <div class="flex-1">
                                        <p class="font-medium text-text-primary dark:text-white">System backup completed</p>
                                        <p class="text-text-secondary dark:text-gray-300 text-sm">3 hours ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                            <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">System Status</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between">
                                    <span class="text-text-primary dark:text-white">Server Uptime</span>
                                    <span class="font-medium text-green-500">99.9%</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 99.9%"></div>
                                </div>

                                <div class="flex justify-between mt-4">
                                    <span class="text-text-primary dark:text-white">Database Status</span>
                                    <span class="font-medium text-green-500">Operational</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                                </div>

                                <div class="flex justify-between mt-4">
                                    <span class="text-text-primary dark:text-white">Active Users</span>
                                    <span class="font-medium text-text-primary dark:text-white">24</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                    <div class="bg-pacific-blue h-2 rounded-full" style="width: 60%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Load user management screen
        function loadUserManagement() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <div class="flex flex-wrap justify-between gap-4 items-center mb-6">
                        <h2 class="text-2xl font-bold text-primary dark:text-white">User Management</h2>
                        <button id="addNewUserBtn" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-pacific-blue text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-pacific-blue/90 transition-colors">
                            <span class="truncate">Add New User</span>
                        </button>
                    </div>
                    <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                        <div class="relative w-full max-w-md mb-6">
                            <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary/80 dark:text-gray-400 text-xl">search</span>
                            <input id="userSearch" class="form-input h-10 w-full rounded-lg bg-background-light dark:bg-background-dark text-text-primary dark:text-white placeholder:text-text-secondary dark:placeholder:text-gray-400 border-gray-200 dark:border-gray-700 pl-10 pr-4 text-sm focus:ring-2 focus:ring-pacific-blue focus:border-pacific-blue" placeholder="Search users by name, email, or role..." type="search"/>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200 dark:border-gray-700 text-left">
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">User</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Role</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Status</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Last Activity</th>
                                        <th class="pb-3 text-text-secondary dark:text-gray-300 font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                    <tr>
                                        <td class="py-4">
                                            <div class="flex items-center gap-3">
                                                <div class="size-10 rounded-full bg-pacific-blue/10 flex items-center justify-center">
                                                    <span class="text-pacific-blue font-semibold">EV</span>
                                                </div>
                                                <div>
                                                    <p class="font-medium text-text-primary dark:text-white">Eleanor Vance</p>
                                                    <p class="text-text-secondary dark:text-gray-300 text-sm">eleanor@example.com</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300">
                                                <span class="size-1.5 rounded-full bg-red-500"></span>
                                                Admin
                                            </span>
                                        </td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300">
                                                <span class="size-1.5 rounded-full bg-green-500"></span>
                                                Active
                                            </span>
                                        </td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">2024-11-06 10:45 AM</td>
                                        <td class="py-4">
                                            <button class="text-pacific-blue hover:text-pacific-blue/80 text-sm font-medium mr-3">Edit</button>
                                            <button class="text-red-500 hover:text-red-600 text-sm font-medium">Delete</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="py-4">
                                            <div class="flex items-center gap-3">
                                                <div class="size-10 rounded-full bg-green-500/10 flex items-center justify-center">
                                                    <span class="text-green-500 font-semibold">MH</span>
                                                </div>
                                                <div>
                                                    <p class="font-medium text-text-primary dark:text-white">Marcus Holloway</p>
                                                    <p class="text-text-secondary dark:text-gray-300 text-sm">marcus@example.com</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300">
                                                <span class="size-1.5 rounded-full bg-blue-500"></span>
                                                Production Manager
                                            </span>
                                        </td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300">
                                                <span class="size-1.5 rounded-full bg-green-500"></span>
                                                Active
                                            </span>
                                        </td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">2024-11-06 09:12 AM</td>
                                        <td class="py-4">
                                            <button class="text-pacific-blue hover:text-pacific-blue/80 text-sm font-medium mr-3">Edit</button>
                                            <button class="text-gray-500 hover:text-gray-600 text-sm font-medium">Disable</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="py-4">
                                            <div class="flex items-center gap-3">
                                                <div class="size-10 rounded-full bg-yellow-500/10 flex items-center justify-center">
                                                    <span class="text-yellow-500 font-semibold">CO</span>
                                                </div>
                                                <div>
                                                    <p class="font-medium text-text-primary dark:text-white">Clara Oswald</p>
                                                    <p class="text-text-secondary dark:text-gray-300 text-sm">clara@example.com</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300">
                                                <span class="size-1.5 rounded-full bg-purple-500"></span>
                                                Operator
                                            </span>
                                        </td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300">
                                                <span class="size-1.5 rounded-full bg-green-500"></span>
                                                Active
                                            </span>
                                        </td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">2024-11-05 03:20 PM</td>
                                        <td class="py-4">
                                            <button class="text-pacific-blue hover:text-pacific-blue/80 text-sm font-medium mr-3">Edit</button>
                                            <button class="text-gray-500 hover:text-gray-600 text-sm font-medium">Disable</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="py-4">
                                            <div class="flex items-center gap-3">
                                                <div class="size-10 rounded-full bg-indigo-500/10 flex items-center justify-center">
                                                    <span class="text-indigo-500 font-semibold">JS</span>
                                                </div>
                                                <div>
                                                    <p class="font-medium text-text-primary dark:text-white">John Smith</p>
                                                    <p class="text-text-secondary dark:text-gray-300 text-sm">john.smith@example.com</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300">
                                                <span class="size-1.5 rounded-full bg-purple-500"></span>
                                                Operator
                                            </span>
                                        </td>
                                        <td class="py-4">
                                            <span class="inline-flex items-center gap-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300">
                                                <span class="size-1.5 rounded-full bg-yellow-500"></span>
                                                Invited
                                            </span>
                                        </td>
                                        <td class="py-4 text-text-secondary dark:text-gray-300">Never</td>
                                        <td class="py-4">
                                            <button class="text-pacific-blue hover:text-pacific-blue/80 text-sm font-medium mr-3">Edit</button>
                                            <button class="text-red-500 hover:text-red-600 text-sm font-medium">Revoke</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="mt-6 flex justify-center">
                            <div class="flex items-center gap-2">
                                <span class="flex items-center justify-center size-8 rounded-lg border border-gray-200 dark:border-gray-700 text-text-secondary dark:text-gray-400">←</span>
                                <span class="flex items-center justify-center size-8 rounded-lg bg-pacific-blue text-white font-semibold">1</span>
                                <button class="flex items-center justify-center size-8 rounded-lg border border-gray-200 dark:border-gray-700 text-text-primary dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">2</button>
                                <button class="flex items-center justify-center size-8 rounded-lg border border-gray-200 dark:border-gray-700 text-text-primary dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">3</button>
                                <span class="flex items-center justify-center size-8 rounded-lg border border-gray-200 dark:border-gray-700 text-text-secondary dark:text-gray-400">→</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Load role and permissions management screen
        function loadRolePermissions() {
            mainContent.innerHTML = `
                <div class="w-full p-8">
                    <h2 class="text-2xl font-bold text-primary dark:text-white mb-6">Roles & Permissions</h2>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2">
                            <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-lg font-semibold text-text-primary dark:text-white">Available Roles</h3>
                                    <button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-pacific-blue text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-pacific-blue/90 transition-colors">
                                        <span class="truncate">Create New Role</span>
                                    </button>
                                </div>
                                <div class="space-y-4">
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-background-light dark:bg-background-dark">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="font-medium text-text-primary dark:text-white">Admin</h4>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">Full system access with all permissions</p>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="text-pacific-blue hover:text-pacific-blue/80 text-sm font-medium">Edit</button>
                                                <button class="text-red-500 hover:text-red-600 text-sm font-medium">Delete</button>
                                            </div>
                                        </div>
                                        <div class="mt-3 flex flex-wrap gap-2">
                                            <span class="inline-flex items-center gap-1.5 py-1 px-2.5 rounded-full text-xs font-medium bg-pacific-blue/10 text-pacific-blue">All permissions</span>
                                        </div>
                                    </div>
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-background-light dark:bg-background-dark">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="font-medium text-text-primary dark:text-white">Production Manager</h4>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">Manage production, work orders, and inventory</p>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="text-pacific-blue hover:text-pacific-blue/80 text-sm font-medium">Edit</button>
                                                <button class="text-red-500 hover:text-red-600 text-sm font-medium">Delete</button>
                                            </div>
                                        </div>
                                        <div class="mt-3 flex flex-wrap gap-2">
                                            <span class="inline-flex items-center gap-1.5 py-1 px-2.5 rounded-full text-xs font-medium bg-green-500/10 text-green-500">Manage Production</span>
                                            <span class="inline-flex items-center gap-1.5 py-1 px-2.5 rounded-full text-xs font-medium bg-green-500/10 text-green-500">Manage Work Orders</span>
                                            <span class="inline-flex items-center gap-1.5 py-1 px-2.5 rounded-full text-xs font-medium bg-green-500/10 text-green-500">View Reports</span>
                                        </div>
                                    </div>
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-background-light dark:bg-background-dark">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="font-medium text-text-primary dark:text-white">Operator</h4>
                                                <p class="text-text-secondary dark:text-gray-300 text-sm mt-1">Limited access for production operations</p>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="text-pacific-blue hover:text-pacific-blue/80 text-sm font-medium">Edit</button>
                                                <button class="text-red-500 hover:text-red-600 text-sm font-medium">Delete</button>
                                            </div>
                                        </div>
                                        <div class="mt-3 flex flex-wrap gap-2">
                                            <span class="inline-flex items-center gap-1.5 py-1 px-2.5 rounded-full text-xs font-medium bg-yellow-500/10 text-yellow-500">View Work Orders</span>
                                            <span class="inline-flex items-center gap-1.5 py-1 px-2.5 rounded-full text-xs font-medium bg-yellow-500/10 text-yellow-500">Update Production Status</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="bg-neutral-white dark:bg-gray-800 rounded-xl p-6 shadow-[0_2px_8px_rgba(0,0,0,0.05)]">
                                <h3 class="text-lg font-semibold text-text-primary dark:text-white mb-4">Role Permissions</h3>
                                <p class="text-text-secondary dark:text-gray-300 text-sm mb-4">Select a role to view and edit its permissions</p>
                                
                                <div class="space-y-3">
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                                        <h4 class="font-medium text-text-primary dark:text-white mb-3">Basic Permissions</h4>
                                        <div class="space-y-2">
                                            <div class="flex items-center justify-between">
                                                <label class="text-text-secondary dark:text-gray-300 text-sm">View Dashboard</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer" checked>
                                                    <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pacific-blue"></div>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <label class="text-text-secondary dark:text-gray-300 text-sm">View Reports</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer" checked>
                                                    <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pacific-blue"></div>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <label class="text-text-secondary dark:text-gray-300 text-sm">Edit Profile</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer" checked>
                                                    <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pacific-blue"></div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                                        <h4 class="font-medium text-text-primary dark:text-white mb-3">Production Permissions</h4>
                                        <div class="space-y-2">
                                            <div class="flex items-center justify-between">
                                                <label class="text-text-secondary dark:text-gray-300 text-sm">Manage Work Orders</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer" checked>
                                                    <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pacific-blue"></div>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <label class="text-text-secondary dark:text-gray-300 text-sm">Update Production Status</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer" checked>
                                                    <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pacific-blue"></div>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <label class="text-text-secondary dark:text-gray-300 text-sm">Manage Inventory</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer">
                                                    <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pacific-blue"></div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                                        <h4 class="font-medium text-text-primary dark:text-white mb-3">Admin Permissions</h4>
                                        <div class="space-y-2">
                                            <div class="flex items-center justify-between">
                                                <label class="text-text-secondary dark:text-gray-300 text-sm">Manage Users</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer">
                                                    <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pacific-blue"></div>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <label class="text-text-secondary dark:text-gray-300 text-sm">Manage Roles</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer">
                                                    <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pacific-blue"></div>
                                                </label>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <label class="text-text-secondary dark:text-gray-300 text-sm">System Configuration</label>
                                                <label class="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" class="sr-only peer">
                                                    <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-pacific-blue"></div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-6">
                                    <button class="w-full flex items-center justify-center rounded-lg h-10 bg-pacific-blue text-white text-sm font-bold hover:bg-pacific-blue/90 transition-colors">
                                        Save Role Permissions
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialize with dashboard
        loadDashboard();
    </script>
</body>
</html>